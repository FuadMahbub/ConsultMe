{% extends 'client_base.html' %}

{% block title %}Invoice Detail{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="card">
        <div class="card-header">
            <h1 class="h4">Invoice Details</h1>
        </div>
        <div class="card-body">
            <h2 class="h5 mb-3">Invoice Information</h2>
            <p><strong>Invoice Number:</strong> {{ invoice.id }}</p>
            <p><strong>Status:</strong> {{ invoice_status }}</p>
            {% if case %}
            <hr>
            <h2 class="h5 mb-3">Case Details</h2>
            <p><strong>Case Name:</strong> {{ case.name }}</p>
            <p><strong>Description:</strong> {{ case.description }}</p>
            <p><strong>Total Fee:</strong> ${{ total_fee }}</p>
            <p><strong>Total Paid:</strong> ${{ total_paid }}</p>
            <p><strong>Amount Due:</strong> ${{ payment_due }}</p>
            {% else %}
            <p class="text-warning">No case information available.</p>
            {% endif %}
            <hr>
            <div class="mb-3">
                {% if invoice.payment_reference %}
                <p><strong>Payment Reference:</strong> {{ invoice.payment_reference }}</p>
                {% endif %}
                {% if invoice.card_last_four %}
                <p><strong>Card Last Four:</strong> **** **** **** {{ invoice.card_last_four }}</p>
                {% endif %}
            </div>
        </div>
        <div class="card-footer text-center">
            <a href="{% url 'billing:process_payment' case.id %}" class="btn btn-success">Pay Remaining</a>
            <a href="{% url 'billing:download_invoice' invoice.id %}" class="btn btn-primary">Download Invoice</a>
        </div>
    </div>
</div>
{% endblock %}
